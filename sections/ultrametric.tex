%! TeX root: ../main.tex
\section{Ultrametric Analysis}
\subsection{The space \( \mathbb{N} ^{\mathbb{N} } \) and \( \varepsilon  \)-chains} In this short section, we provide some examples of ultrametric spaces. In particular, we construct ultrametrics on the Baire space $\mathbb{N} ^{\mathbb{N} } $ and general uniformly disconnected metric spaces.

The simplest example of an ultrametric on a set $X$ is the discrete metric $d$, where $d(x,y)$ is 1 if $x \neq y$ and 0 otherwise. Another simple example is $(\mathbb{N}, d)$, where \( d(n,m) = \max \{ 1 + 1/n , 1 + 1/m \}  \) if \( n \neq m \) and \( d(n, m) = 0 \) otherwise.

The \emph{Baire space} \( \mathbb{N} ^{\mathbb{N} }  \) is the space of all sequences of natural numbers.
\begin{example}
For two distinct sequences \( x =  (x_{n}) \), \( y = (y_{n} ) \) of naturals, we define \( m(x,y) = \min \{ k \in \mathbb{N} : x_{k} \neq y_{k}  \}  \), the first index at which \( x \) and \( y \) do not coincide. For distinct sequences \( x,y \in \mathbb{N} ^{\mathbb{N} }  \), set \( d(x,y) = m(x,y)^{-1}  \) with \( d(x,x) = 0 \). Then \( d \) is an ultrametric on \( \mathbb{N} ^{\mathbb{N} }  \).
\end{example}
\begin{proof}
The symmetry and non-negativity of \( d \) is immediate. Furthermore, \( d(x,x) = 0 \) by definition, and if \( d(x,y) = 0  \) then we must have \( x = y \) since \( m(x,y) \geq 1 \). To prove the strong triangle inequality for \( d \), fix \( x,y,z \in \mathbb{N} ^{\mathbb{N} }  \). We assume \( x,y,z \) are all distinct sequences as the result is immediate otherwise. Observe that
\begin{align*}
	&d(x,y) \leq \max \{ d(x,z), d(z,y) \} \\
	&\Leftrightarrow m(x,y)^{-1} \leq \max \{ m(x,z)^{-1} , m(z,y)^{-1}  \}  \\
	&\Leftrightarrow m(x,y)^{-1}  \leq \min \{ m(x,z), m(z,y) \} ^{-1} \\
	&\Leftrightarrow m(x,y) \geq \min \{ m(x,z), m(z,y) \}.
\end{align*}
Clearly \( m(x,y) \geq \min \{ m(x,z), m(z,y) \}  \): if \( \ell = m(x,y) \) then for each \( k \in \{ 1, 2, \hdots , \ell - 1 \} \) the terms \( x_{k} = y_{k}  \), so if \( m(x,z) \geq \ell + 1 \) and \( m(z,y) \geq \ell + 1 \) then \( x_{\ell} = z_{\ell} = y_{\ell}   \) so that \( m(x,y) \geq \ell + 1 \) is a contradiction. Therefore, \( d \) is an ultrametric.
\end{proof}

Let \( (X,d) \) be any metric space and \( \varepsilon > 0 \) be given. An \emph{\( \varepsilon  \)-chain} between the pair \( x,y \in X \) is a finite sequence \( x = x_0 , x_1, \hdots , x_{n} = y  \) such that \[\max_{1 \leq i \leq n}  d(x_{i-1} , x_{i}) \leq \varepsilon. \] In this case, we say that \( x, y \) are \( \varepsilon  \)-connected. Observe that if \( x, y \) are \( \varepsilon  \)-connected then they are \( \varepsilon ' \)-connected for every \( \varepsilon ' \geq \varepsilon  \); and if \( x, y \) can not be \( \varepsilon  \)-connected then they can not be \( \varepsilon ' \)-connected for every \( \varepsilon ' \leq \varepsilon  \).


The space \( X \) is called \emph{uniformly disconnected} if there is an \( \varepsilon > 0 \) such that no two points in \( X \) can be \( \varepsilon  \)-connected.
\begin{example}
Let \( (X,d) \) be a uniformly disconnected metric space. For \( x,y \in X \), let \( c(x,y) \) be the infimum over all \( \varepsilon > 0 \) such that \( x \) and \( y \) are \( \varepsilon  \)-connected. Then \( c \) is an ultrametric on \( X \).
\end{example}
\begin{proof}
Clearly \( c \) is symmetric and non-negative. If \( x = y \) then clearly \( x,y \) are \( \varepsilon  \)-connected for every \( \varepsilon > 0 \) so that \( c(x,y) = 0 \). On the other hand, if \( c(x,y) = 0  \) then \( x = y \), otherwise for each \( \varepsilon > 0 \) the points \( x,y \) are \( \varepsilon  \)-connected, so \( X \) is not uniformly disconnected, a contradiction.

The last thing to prove is the strong triangle inequality for \( c \). To this end, fix \( x,y,z \in X \) and let \( \varepsilon > 0 \) be given. We may assume the points \( x,y,z \) are distinct, otherwise the claim is immediate. By definition of the infimum, there exist \( \gamma_1, \gamma_2 > 0 \) with \( \gamma_1 \leq c(x,z) + \varepsilon  \) and \( \gamma_2 \leq c(z,y) + \varepsilon  \) such that \( x,z \) are \( \gamma_1 \)-connected and \( z,y \) are \( \gamma_2 \)-connected. Set \( \gamma = \max \{ \gamma_1, \gamma_2 \}\) and note that by combining the \( x,z \) and \( z,y \) chains it follows that \( x,y \) are \( \gamma \)-connected. Thus \[ c(x,y) \leq \gamma \leq \max \{ c(x,z), c(z,y) \} + \varepsilon . \] Since \( \varepsilon  \) was arbitrary, it follows that \( c(x,y) \leq \max \{ c(x,z), c(z,y) \} \).
\end{proof}
\subsection{Properties of ultrametric spaces}
\begin{lemma}
If \( x, y, z \) are distinct points in an ultrametric space \( X \) and \( d(x,y) < d(y,z) \) then \( d(y,z) = d(x,z) \). (That is, every triangle in an ultrametric space is isosceles.)
\end{lemma}
\begin{proof}
Note that \( d \) is an ultrametric and \( d(x,y) < d(y,z) \) so that
\begin{align*}
	d(x, z) &\leq \max \{ d(x,y), d(y, z) \} = d(y,z),
\end{align*}
and since \( d(y,z) > d(x,y) \), we have \( d(x,y) < d(x,z) \) as otherwise
\begin{align*}
	d(y,z) &\leq \max \{ d(y, x) , d(x, z) \} = \max \{ d(x,y) , d(x,z) \} = d(x,y)
\end{align*}
is a contradiction. Thus \( d(y,z) \leq \max \{ d(x,y), d(x,z) \} = d(x,z) \). Combining everything together, we obtain \( d(y,z) = d(x,z) \).
\end{proof}



An \emph{open ball} (or simply a \emph{ball}) of radius \( \varepsilon > 0 \) centered about a point \( x \in  X \) is defined as the set \( B_{\varepsilon }(x) \coloneqq \{ y \in X : d(x,y) < \varepsilon  \}  \). If left unspecified, note that \( x \) denotes a point in \( X \) and \( \varepsilon  \) a positive real number. 

A subset \( \mathcal{O}  \) of \( X \) is called \emph{open} if it can be written as a union of open balls. A set is \emph{closed} if its complement is open. Open balls and general sets in ultrametric spaces exhibit properties that are quite counterintuitive, as delineated by the following simple lemmas.
\begin{lemma}
Let \( B_{\varepsilon } (x) \) be an open ball in \( X \). Then \( B_{\varepsilon } (x) = B_{\varepsilon } (y) \) for every point \( y \in B_{\varepsilon } (x) \). (That is, every point in a ball is its center.)
\end{lemma}
\begin{proof}
Fix \( y \in B_{\varepsilon } (x) \) so that \( d(x,y) < \varepsilon  \). If \( t \in B_{\varepsilon } (y) \) then \( d(y,t) < \varepsilon  \). Then \( t \in B_{\varepsilon } (x) \) since \[ d(x, t) \leq \max \{ d(x,y), d(y,t) \} < \varepsilon . \] The reverse inclusion follows symmetrically as \( x \in B_{\varepsilon } (y) \).
\end{proof}

\begin{lemma}
Let \( A \subseteq X \) and consider any ball \(B_{\varepsilon } (x) \) in \( X \). If \( B_{\varepsilon } (x) \) meets \( A \) then \( A \cap B_{\varepsilon } (x) \) is a ball in the space \( (A, d) \).
\end{lemma}
\begin{proof}
Since \( A \cap B_{\varepsilon } (x) \neq \emptyset  \), there is a point \( a \in A \cap B_{\varepsilon } (x) \). Let \( B_{A} = \{ t \in A : d(t,a) < \varepsilon  \}  \) be a ball in \( A \). We show that \( A \cap B_{\varepsilon } (x) = B_{A}  \).

Note from (lemma) that \( a \) is the center of \( B_{\varepsilon } (x) \) so that \( A \cap B_{\varepsilon } (x) = A \cap B_{\varepsilon } (a) \). Then if \( t \in A \cap B_{\varepsilon } (x) \) we have \( t \in A \cap B_{\varepsilon } (a) \) so that \( d(t, a) < \varepsilon  \) and hence \( t \in B_{A} \). On the other hand, if \( t \in B_{A}  \) then from the strong triangle inequality we obtain \[ d(x, t) \leq \max \{ d(x,a), d(a,t) \} < \varepsilon , \] since \( a \in B_{\varepsilon } (x) \). Hence, \( t \in A \cap B_{\varepsilon } (x) \) completes the proof.
\end{proof}
\begin{comment}
Since \( A \cap B \neq \emptyset \) there is a point \( a \in A \cap B \). Write \( B = B_{\varepsilon } (x) \) for some \( x \in X \) and \( \varepsilon > 0 \). To show that \( A \cap B \) is a ball in \( A \), we must find a radius \( r > 0 \) such that for every \( t \in A \cap B\), \( d(a,t) < r \). Set \( r = \varepsilon  \) and fix \( t \in A \cap B \). Then \( a, t \in B \) so that \( d(a,x) < \varepsilon  \) and \( d(t,x) < \varepsilon  \). Using the strong triangle inequality, \[ d(a,t) \leq \max \{ d(a,x) , d(t,x) \} < \varepsilon = r. \] Therefore, \( A \cap B \) is a ball in \( A \).
\end{comment}
\begin{lemma}
Fix \( \varepsilon_1, \varepsilon_2 > 0 \) and \( x, y \in X \). If \( B_{\varepsilon_1} (x) \cap B_{\varepsilon_2}(y) \neq \emptyset  \) then \( B_{\varepsilon_1} (x) \subseteq B_{\varepsilon_2} (y) \) or \( B_{\varepsilon_{2} }(y) \subseteq B_{\varepsilon_1} (x)  \). (That is, two balls are either disjoint or one of them contains the other.)
\end{lemma}
\begin{proof}
This is a weaker version of (obs), but we give the statement its own proof for clarity. Assume without loss of generality that \( \varepsilon_1 \leq \varepsilon_2 \). If \( B_{\varepsilon_1} (x) \cap B_{\varepsilon_2} (y) \neq \emptyset \), there is a point \( t \in X \) with \( t \in B_{\varepsilon_1}(x) \) and \( t \in  B_{\varepsilon_2} (y)  \). By (lemma) and since \( \varepsilon_1 \leq \varepsilon_2 \), we obtain \( B_{\varepsilon_1} (x) = B_{\varepsilon_1} (t) \subseteq B_{\varepsilon_2} (t) = B_{\varepsilon_2} (y) \) as required.
\end{proof}
\begin{lemma}
If \( B_{\varepsilon } (x) \) is an open ball in \( X \), then \( X \setminus  B_{\varepsilon } (x) \) is a union of open balls. (That is, open balls are closed in \( X \).)
\end{lemma}
\begin{proof}
Suppose for a contradiction that there is a point \( t \in X \setminus B_{\varepsilon} (x) \) such that for every \( r > 0 \) the ball \( B_{r}(t) \) is not contained in \( X \setminus B_{\varepsilon } (x) \), so \( B_{r} (t) \cap B_{\varepsilon} (x) \neq \emptyset \). Setting \( r = \varepsilon  \) and using (lemma), we have \( B_{\varepsilon} (t) \subseteq B_{\varepsilon } (x) \) or \( B_{\varepsilon} (t) \subseteq B_{\varepsilon} (x) \). In either case, (lemma) implies equality. But then \( t \in X \setminus B_{\varepsilon } (x) = X \setminus B_{\varepsilon } (t) \) is a contradiction. Hence \( X \setminus B_{\varepsilon } (x) \) is a union of open balls so that \( B_{\varepsilon } (x) \) is closed in \( X \).
\end{proof}
\begin{lemma}
Let \( A \subseteq X \) be non-empty with \( a \in A \). Then \( \operatorname{diam} A = \sup \{ d(a, x) : x \in A \}   \).
\end{lemma}
\begin{proof}
	Set \( u = \sup \{ d(a,x) : x \in A \}  \) and fix \( x,y \in A \). Then \[ d(x,y) \leq \max \{ d(x, a) , d(a, y) \} = \max \{ d(a,x), d(a,y) \} \leq u  \] so that \( u \) is an upper bound of \( D = \{ d(x,y) : x,y \in A \}  \). Since \( u = \sup_{} \{ d(a,x) : x \in A \}  \), for any given \( \varepsilon > 0 \), there exists a point \( x_{\varepsilon } \in A \) with \( u \leq d(a, x_{\varepsilon }) + \varepsilon   \). But \( a, x_{\varepsilon } \in A \) so that \( u = \sup D = \operatorname{diam} A \) which completes the proof.
\end{proof}
\begin{comment}
\subsection{Spherical Completeness} The space \( (X,d) \) is called \emph{spherically complete} if every decreasing sequence of closed balls has a non-empty intersection; that is, if \( \{ B_{n}  \}_{n = 1} ^{\infty}  \) is a sequence of closed balls in \( X \) with \( B_{k+1}  \subseteq B_{k}  \) for each \( k \in \mathbb{N}  \), then \( \medcap_{n=1}^{\infty}  B_{n} \neq \emptyset  \). For example, all compact metric spaces are spherically complete since they have the finite intersection property (cite).

It turns out that the strong triangle inequality coupled with spherical completeness yield some elegant results regarding best approximations [1]. In the following lemma, we extend the approach used in these findings to investigate the diameters of sets in spherically complete ultrametric spaces.

\begin{lemma}
Let \( (X,d) \) be a spherically complete ultrametric space with a non-empty bounded subset \( A \subseteq X \). Then \( A \) admits a pair of points \( a,b \in A \) with \( d(a,b) = \operatorname{diam} A \).
\end{lemma}
\begin{proof}
Since \( A \) is non-empty and bounded, there is a point \( a \in A \) and the quantity \( \operatorname{diam} A < \infty \). For each \( n \in \mathbb{N}  \), define \[ B_{n} = \{ x \in A : d(a,x) \leq \operatorname{diam} A + 1/n \}. \] Then \( \{ B_{n}  \}_{n = 1} ^{\infty}  \) is a decreasing sequence of balls, so spherical completeness yields a point \( b \in \medcap_{n=1} ^{\infty} B_{n}  \).

From (lemma), we have \( \operatorname{diam} A = \sup \{ d(a,x) : x \in A \}   \). It follows that \( d(a,b) = \operatorname{diam} A \). Indeed, for each \( x \in A \), \[ d(a,x) \leq \max \{ d(a,b), d(b,x) \}  \]

\end{proof}
\end{comment}

