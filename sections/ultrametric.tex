%! TeX root: ../main.tex
\section{Ultrametric Analysis}
In this short section, we provide some interesting examples of ultrametric spaces and survey some of their fundamental properties.
\subsection{Examples: The space \( \mathbb{N} ^{\mathbb{N} } \), graphs, and \( \varepsilon  \)-chains} The simplest example of an ultrametric on a set $X$ is the discrete metric $d$, where $d(x,y)$ is 1 if $x \neq y$ and 0 otherwise. Another simple example is $(\mathbb{N}, d)$, where \( d(n,m) = \max \{ 1 + 1/n , 1 + 1/m \}  \) if \( n \neq m \) and \( d(n, m) = 0 \) otherwise. This metric was first constructed by (guy) in (year) to (task) [3]. 

However, there are much more interesting constructions. In this regard, we will construct ultrametrics on the Baire space $\mathbb{N} ^{\mathbb{N} }$, connected graphs, and general uniformly disconnected metric spaces.

\subsubsection{The Baire space} We will first discuss the \emph{Baire space} \( \mathbb{N} ^{\mathbb{N} }  \), which is the space of all sequences of natural numbers.

For two distinct sequences \( x =  (x_{n}) \), \( y = (y_{n} ) \) in \( \mathbb{N}  \), we define \( m(x,y) = \min \{ k \in \mathbb{N} : x_{k} \neq y_{k}  \}  \) to be the first index at which \( x \) and \( y \) do not coincide. For distinct sequences \( x,y \in \mathbb{N} ^{\mathbb{N} }  \), set \( d(x,y) = m(x,y)^{-1}  \) with \( d(x,y) = 0 \) if \( x=y \). Then \( d \) is an ultrametric on \( \mathbb{N} ^{\mathbb{N} }  \).
\begin{proof}
The symmetry and non-negativity of \( d \) is immediate. Furthermore, \( d(x,x) = 0 \) by definition, and if \( d(x,y) = 0  \) then we must have \( x = y \) since \( m(x,y) \geq 1 \). To prove the strong triangle inequality for \( d \), fix \( x,y,z \in \mathbb{N} ^{\mathbb{N} }  \). We assume \( x,y,z \) are all distinct sequences as the result is immediate otherwise. Observe that
\begin{align*}
	&d(x,y) \leq \max \{ d(x,z), d(z,y) \} \\
	&\Leftrightarrow m(x,y)^{-1} \leq \max \{ m(x,z)^{-1} , m(z,y)^{-1}  \}  \\
	&\Leftrightarrow m(x,y)^{-1}  \leq \min \{ m(x,z), m(z,y) \} ^{-1} \\
	&\Leftrightarrow m(x,y) \geq \min \{ m(x,z), m(z,y) \}.
\end{align*}
Clearly \( m(x,y) \geq \min \{ m(x,z), m(z,y) \}  \): if \( \ell = m(x,y) \) then for each \( k \in \{ 1, 2, \hdots , \ell - 1 \} \) the terms \( x_{k} = y_{k}  \), so if \( m(x,z) \geq \ell + 1 \) and \( m(z,y) \geq \ell + 1 \) then \( x_{\ell} = z_{\ell} = y_{\ell}   \) so that \( m(x,y) \geq \ell + 1 \) is a contradiction. Therefore, \( d \) is an ultrametric.
\end{proof}
\subsubsection{Graphs} (the following is due to (author), with intuition, ...) Let \( G \) be a connected graph with positive edge-weights. For an edge \( e \) in \( G \), let \( w(e) \) denote its weight. Given a walk \( x = (v_1, v_2, \hdots , v_{n}) \) in \( G \), we will denote by \( e_{x} \) an edge in the walk with maximum weight.

We say that a walk \( x \) between two vertices \( u , v \) is a \emph{minimax walk} if there is no other walk \( x' \) between \( u,v \) whose max-weight edge is lighter than \( e_{x}  \). Equivalently, \( w(e_{x}) \leq w(e_{x'}) \) for every walk \( x' \) between \( u,v \).

We can use this notion to define an ultrametric on \( V(G) \). Specifically, given two distinct vertices \( u,v \in V(G) \) with minimax walk \( x \), we set \( \ell(u, v) = w(e_{x}) \), with \( \ell(u,u) = 0 \). The proof that \( \ell \) is an ultrametric is as follows.

\begin{proof}
That \( \ell \) is symmetric and non-negative is immediate. By definition, \( \ell(u, u) = 0 \) and if \( \ell(u, v) = 0 \) then \( u = v \), as otherwise there is an edge in \( G \) with weight 0 even though its edges have only positive weights.

To prove the ultrametric inequality, fix \( u, v, w \in V(G) \). We may assume that \( u,v,w \) are distinct as otherwise the claim is immediate. Let \( x_{u,w} = (v_1, v_2, \hdots , v_{m}) \) and \( x_{w,v} = (v_{m}, v_{m+1} , \hdots , v_{n}) \) denote minimax walks between \( u,w \) and \( w,v \) respectively, and let \( x = (v_1, v_2, \hdots , v_{n}) \) be their union. Then the max-weight edge in \( x \) has weight \( \max \{ \ell (u, w), \ell (w,v) \}  \). Since \( x \) is a walk between \( u,v \), we have \( \ell (u, v) \leq \max \{ \ell (u,w), \ell (w,v) \}  \), completing the proof.
\end{proof}

\subsubsection{Uniformly disconnected spaces} (cite def) Let \( (X,d) \) be any metric space and \( \varepsilon > 0 \) be given. An \emph{\( \varepsilon  \)-chain} between the pair \( x,y \) of distinct points in \( X \) is a finite sequence \( x = x_0 , x_1, \hdots , x_{n} = y  \) such that \[\max_{1 \leq i \leq n}  d(x_{i-1} , x_{i})  \leq \varepsilon \cdot d(x,y). \] In this case, we say that \( x, y \) are \( \varepsilon  \)-connected. Observe that if \( x, y \) are \( \varepsilon  \)-connected then they are \( \varepsilon ' \)-connected for every \( \varepsilon ' \geq \varepsilon  \); and if \( x, y \) can not be \( \varepsilon  \)-connected then they can not be \( \varepsilon ' \)-connected for every \( \varepsilon ' \leq \varepsilon  \).


The space \( X \) is called \emph{uniformly disconnected} if there is an \( \varepsilon > 0 \) such that no two points in \( X \) can be \( \varepsilon  \)-connected. It is not hard to prove that uniform disconnectivity is stronger than total disconnectivity. To give some intuition, we note that the Cantor set \( \mathcal{C}  \) is uniformly disconnected and the set \( \{ 1/n : n \in \mathbb{N}  \}  \) is not [tb].


Let \( (X,d) \) be a uniformly disconnected metric space. For \( x,y \in X \), let \( c(x,y) \) be the infimum over all \( \varepsilon > 0 \) such that \( x \) and \( y \) are \( d(x,y)^{-1} \cdot \varepsilon  \)-connected. Then \( c \) is an ultrametric on \( X \).
\begin{proof}
Clearly \( c \) is symmetric and non-negative. If \( x = y \) then clearly \( x,y \) are \( \varepsilon  \)-connected for every \( \varepsilon > 0 \) so that \( c(x,y) = 0 \). On the other hand, if \( c(x,y) = 0  \) then \( x = y \), otherwise for each \( \varepsilon > 0 \) the points \( x,y \) are \( \varepsilon  \)-connected, so \( X \) is not uniformly disconnected, a contradiction.

The last thing to prove is the strong triangle inequality for \( c \). To this end, fix \( x,y,z \in X \) and let \( \varepsilon > 0 \) be given. We may assume the points \( x,y,z \) are distinct, otherwise the claim is immediate.

By definition of the infimum, there exist \( \gamma_1, \gamma_2 > 0 \) with \( \gamma_1 \leq c(x,z) + \varepsilon  \) and \( \gamma_2 \leq c(z,y) + \varepsilon  \) such that \( x,z \) are \( d(x,z)^{-1} \cdot \gamma_1 \)-connected and \( z,y \) are \(d(z,y)^{-1} \cdot \gamma_2 \)-connected. Hence we obtain sequences
\begin{itemize}[leftmargin=1.2cm]
	\item \( x = x_0, x_1, \hdots x_{m} = z  \) with \( \max_{1 \leq i \leq m} d(x_{i-1} , x_{i}) \leq \gamma_1 \); and
	\item \( z = x_{m} , x_{m+1} , \hdots , x_{n} = y \) with \( \max_{m+1 \leq i \leq n} d(x_{i-1} , x_{i}) \leq \gamma_2 \). 
\end{itemize}
Now set \( \gamma = \max \{ \gamma_1, \gamma_2 \}  \) and observe that \( x,y \) are \( \gamma \)-connected since \[ \max _{1 \leq i \leq n} d(x_{i-1} , x_{i} ) \leq \gamma = \frac{\gamma}{d(x,y)} \cdot d(x,y). \] 
Then we obtain
\begin{align*}
	c(x,y) \leq \gamma &= \max \{ \gamma_1, \gamma_2 \} \\
	       &\leq \max \{ c(x,z) + \varepsilon , c(z,y) + \varepsilon  \} \\
	       &= \max \{ c(x,z), c(z,y) \} + \varepsilon,
\end{align*}
so sending \( \varepsilon \to 0 \) yields \( c(x,y) \leq \max \{ c(x,z), c(z,y) \} \).
\end{proof}
\subsection{Properties of ultrametric spaces} The strong triangle inequality is much stronger than the usual triangle inequality. Because of this, ultrametric spaces have some elegant properties which we explore now.

First, it turns out that every triangle is isosceles.
\begin{lemma}
\label{lem:1}
If \( x, y, z \) are distinct points in an ultrametric space \( X \) and \( d(x,y) < d(y,z) \) then \( d(y,z) = d(x,z) \).
\end{lemma}
\begin{proof}
Note that \( d \) is an ultrametric and \( d(x,y) < d(y,z) \) so that
\begin{align*}
	d(x, z) &\leq \max \{ d(x,y), d(y, z) \} = d(y,z),
\end{align*}
and since \( d(y,z) > d(x,y) \), we have \( d(x,y) < d(x,z) \) as otherwise
\begin{align*}
	d(y,z) &\leq \max \{ d(y, x) , d(x, z) \} = \max \{ d(x,y) , d(x,z) \} = d(x,y)
\end{align*}
is a contradiction. Thus \( d(y,z) \leq \max \{ d(x,y), d(x,z) \} = d(x,z) \). Combining everything together, we obtain \( d(y,z) = d(x,z) \).
\end{proof}

We now examine open balls in ultrametric spaces. An \emph{open ball} (or simply a ball) of radius \( \varepsilon > 0 \) centered about a point \( x \in  X \) is the set \[ B_{\varepsilon }(x) \coloneqq \{ y \in X : d(x,y) < \varepsilon  \}.  \] A subset \( \mathcal{O}  \) of \( X \) is called \emph{open} if it can be written as a union of open balls. A set is \emph{closed} if its complement is open.

Open balls in ultrametric spaces have vastly unintuitive properties. For example, every point in a ball is its center.

\begin{lemma}
\label{lem:2}
Let \( B_{\varepsilon } (x) \) be an open ball in \( X \). Then \( B_{\varepsilon } (x) = B_{\varepsilon } (y) \) for every point \( y \in B_{\varepsilon } (x) \).
\end{lemma}
\begin{proof}
Fix \( y \in B_{\varepsilon } (x) \) so that \( d(x,y) < \varepsilon  \). If \( t \in B_{\varepsilon } (y) \) then \( d(y,t) < \varepsilon  \). Then \( t \in B_{\varepsilon } (x) \) since \[ d(x, t) \leq \max \{ d(x,y), d(y,t) \} < \varepsilon . \] The reverse inclusion follows symmetrically as \( x \in B_{\varepsilon } (y) \).
\end{proof}
Another important result is that if two balls intersect then one of them contains the other. More generally, we have the following lemma.
\begin{lemma}
\label{lem:3}
Fix \( \varepsilon_1, \varepsilon_2 > 0 \) and \( x, y \in X \). If \( B_{\varepsilon_1} (x) \cap B_{\varepsilon_2}(y) \neq \emptyset  \) then \( B_{\varepsilon_1} (x) \subseteq B_{\varepsilon_2} (y) \) or \( B_{\varepsilon_{2} }(y) \subseteq B_{\varepsilon_1} (x)  \). (That is, two balls are either disjoint or one of them contains the other.)
\end{lemma}
\begin{proof}
	Assume without loss of generality that \( \varepsilon_1 \leq \varepsilon_2 \). If \( B_{\varepsilon_1} (x) \cap B_{\varepsilon_2} (y) \neq \emptyset \), there is a point \( t \in X \) with \( t \in B_{\varepsilon_1}(x) \) and \( t \in  B_{\varepsilon_2} (y)  \). By Lemma \ref{lem:2} and since \( \varepsilon_1 \leq \varepsilon_2 \), we obtain \( B_{\varepsilon_1} (x) = B_{\varepsilon_1} (t) \subseteq B_{\varepsilon_2} (t) = B_{\varepsilon_2} (y) \) as required.
\end{proof}
A generalization of Lemma \ref{lem:3} is as follows.
\begin{lemma}
\label{lem:4}
Let \( A \subseteq X \) and consider any ball \(B_{\varepsilon } (x) \) in \( X \). If \( B_{\varepsilon } (x) \) meets \( A \) then \( A \cap B_{\varepsilon } (x) \) is a ball in the space \( (A, d) \).
\end{lemma}
\begin{proof}
Since \( A \cap B_{\varepsilon } (x) \neq \emptyset  \), there is a point \( a \in A \cap B_{\varepsilon } (x) \). Let \( B_{A} = \{ t \in A : d(t,a) < \varepsilon  \}  \) be a ball in \( A \). We show that \( A \cap B_{\varepsilon } (x) = B_{A}  \).

Note from Lemma \ref{lem:2} that \( a \) is the center of \( B_{\varepsilon } (x) \) so that \( A \cap B_{\varepsilon } (x) = A \cap B_{\varepsilon } (a) \). Then if \( t \in A \cap B_{\varepsilon } (x) \) we have \( t \in A \cap B_{\varepsilon } (a) \) so that \( d(t, a) < \varepsilon  \) and hence \( t \in B_{A} \). On the other hand, if \( t \in B_{A}  \) then from the strong triangle inequality we obtain \[ d(x, t) \leq \max \{ d(x,a), d(a,t) \} < \varepsilon , \] since \( a \in B_{\varepsilon } (x) \). Hence, \( t \in A \cap B_{\varepsilon } (x) \) completes the proof.
\end{proof}
\begin{comment}
Since \( A \cap B \neq \emptyset \) there is a point \( a \in A \cap B \). Write \( B = B_{\varepsilon } (x) \) for some \( x \in X \) and \( \varepsilon > 0 \). To show that \( A \cap B \) is a ball in \( A \), we must find a radius \( r > 0 \) such that for every \( t \in A \cap B\), \( d(a,t) < r \). Set \( r = \varepsilon  \) and fix \( t \in A \cap B \). Then \( a, t \in B \) so that \( d(a,x) < \varepsilon  \) and \( d(t,x) < \varepsilon  \). Using the strong triangle inequality, \[ d(a,t) \leq \max \{ d(a,x) , d(t,x) \} < \varepsilon = r. \] Therefore, \( A \cap B \) is a ball in \( A \).
\end{comment}

Furthermore, it turns out that all open balls are also closed in \( X \).
\begin{lemma}
\label{lem:5}
If \( B_{\varepsilon } (x) \) is an open ball in \( X \), then \( X \setminus  B_{\varepsilon } (x) \) is closed.
\end{lemma}
\begin{proof}
	Suppose for a contradiction that there is a point \( t \in X \setminus B_{\varepsilon} (x) \) such that for every \( r > 0 \) the ball \( B_{r}(t) \) is not contained in \( X \setminus B_{\varepsilon } (x) \), so \( B_{r} (t) \cap B_{\varepsilon} (x) \neq \emptyset \). Setting \( r = \varepsilon  \) and using Lemma \ref{lem:3}, we have \( B_{\varepsilon} (t) \subseteq B_{\varepsilon } (x) \) or \( B_{\varepsilon} (x) \subseteq B_{\varepsilon} (t) \). In either case, Lemma \ref{lem:2} implies equality. But then \( t \in X \setminus B_{\varepsilon } (x) = X \setminus B_{\varepsilon } (t) \) is a contradiction. Hence \( X \setminus B_{\varepsilon } (x) \) is a union of open balls so that \( B_{\varepsilon } (x) \) is closed in \( X \).
\end{proof}
Our final application of the ultrametric inequality is to the diameter of subsets of the space.
\begin{lemma}
\label{lem:6}
Let \( A \subseteq X \) be non-empty with \( a \in A \). Then \( \operatorname{diam} A = \sup \{ d(a, x) : x \in A \}   \).
\end{lemma}
\begin{proof}
	Set \( u = \sup \{ d(a,x) : x \in A \}  \) and fix \( x,y \in A \). Then \[ d(x,y) \leq \max \{ d(x, a) , d(a, y) \} = \max \{ d(a,x), d(a,y) \} \leq u  \] so that \( u \) is an upper bound of \( D = \{ d(x,y) : x,y \in A \}  \). Since \( u = \sup_{} \{ d(a,x) : x \in A \}  \), for any given \( \varepsilon > 0 \), there exists a point \( x_{\varepsilon } \in A \) with \( u \leq d(a, x_{\varepsilon }) + \varepsilon   \). But \( a, x_{\varepsilon } \in A \) so that \( u = \sup D = \operatorname{diam} A \) which completes the proof.
\end{proof}
\begin{comment}
\subsection{Spherical Completeness} The space \( (X,d) \) is called \emph{spherically complete} if every decreasing sequence of closed balls has a non-empty intersection; that is, if \( \{ B_{n}  \}_{n = 1} ^{\infty}  \) is a sequence of closed balls in \( X \) with \( B_{k+1}  \subseteq B_{k}  \) for each \( k \in \mathbb{N}  \), then \( \medcap_{n=1}^{\infty}  B_{n} \neq \emptyset  \). For example, all compact metric spaces are spherically complete since they have the finite intersection property (cite).

It turns out that the strong triangle inequality coupled with spherical completeness yield some elegant results regarding best approximations [1]. In the following lemma, we extend the approach used in these findings to investigate the diameters of sets in spherically complete ultrametric spaces.

\begin{lemma}
Let \( (X,d) \) be a spherically complete ultrametric space with a non-empty bounded subset \( A \subseteq X \). Then \( A \) admits a pair of points \( a,b \in A \) with \( d(a,b) = \operatorname{diam} A \).
\end{lemma}
\begin{proof}
Since \( A \) is non-empty and bounded, there is a point \( a \in A \) and the quantity \( \operatorname{diam} A < \infty \). For each \( n \in \mathbb{N}  \), define \[ B_{n} = \{ x \in A : d(a,x) \leq \operatorname{diam} A + 1/n \}. \] Then \( \{ B_{n}  \}_{n = 1} ^{\infty}  \) is a decreasing sequence of balls, so spherical completeness yields a point \( b \in \medcap_{n=1} ^{\infty} B_{n}  \).

From (lemma), we have \( \operatorname{diam} A = \sup \{ d(a,x) : x \in A \}   \). It follows that \( d(a,b) = \operatorname{diam} A \). Indeed, for each \( x \in A \), \[ d(a,x) \leq \max \{ d(a,b), d(b,x) \}  \]

\end{proof}
\end{comment}

